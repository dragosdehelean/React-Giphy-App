(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,a){e.exports=a(28)},24:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(13),o=a.n(c),r=(a(24),a(15)),i=a(5),s=a(6),m=a(8),u=a(7),d=a(9),g=a(29),h=a(30),f=a(16),p=a(31),E=function(){return l.a.createElement("ul",{className:"nav nav-pills my-3"},l.a.createElement("li",{className:"nav-item"},l.a.createElement(p.a,{exact:!0,to:"/",activeClassName:"active",className:"nav-link"},"Home")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(p.a,{to:"/mycollection",className:"nav-link",activeClassName:"active"},"My Collection")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(p.a,{to:"/upload",className:"nav-link",activeClassName:"active"},"Upload Photo")))},v=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={timeoutId:0,searchTerm:""},a.onChangeHandler=function(e){a.state.timeoutId&&clearTimeout(a.state.timeoutId);var t=setTimeout(function(){a.props.onSearchChange(a.state.searchTerm)},800);a.setState({timeoutId:t,searchTerm:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),a.state.searchTerm&&a.props.onSearchChange(a.state.searchTerm)},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"col-12 col-md-10 col-lg-8"},l.a.createElement("form",{className:"card card-sm",onSubmit:this.handleSubmit},l.a.createElement("div",{className:"card-body row no-gutters align-items-center"},l.a.createElement("div",{className:"col-auto"},l.a.createElement("i",{className:"fas fa-search h3 text-body"})),l.a.createElement("div",{className:"col"},l.a.createElement("input",{className:"form-control form-control-lg form-control-borderless",type:"search",placeholder:"Search for something funny!",value:this.state.searchTerm,onChange:this.onChangeHandler})),l.a.createElement("div",{className:"col-auto"},l.a.createElement("button",{className:"btn btn-lg btn-success",type:"submit"},"Search")))))}}]),t}(n.Component),N=function(e){var t=e.gif,a=e.inCollection,n=e.toggleCollection,c=a?"Remove from MyCollection":"Add to MyCollection",o=a?"btn btn-outline-danger active btn-block":"btn btn-success btn-block";return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"card mb-4 shadow-sm","data-toggle":"modal","data-target":"#exampleModalLong"},l.a.createElement("img",{className:"card-img-top img-fluid",src:t.images.fixed_width.url,alt:t.title,title:t.title}),l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"btn-group-toggle","data-toggle":"buttons"},l.a.createElement("label",{className:o},l.a.createElement("input",{type:"checkbox",checked:a,onChange:n}),c))),l.a.createElement("ul",{className:"list-group list-group-flush"},t.username?l.a.createElement("li",{className:"list-group-item"},l.a.createElement("strong",null,"Username:")," ",t.username):null,l.a.createElement("li",{className:"list-group-item"},l.a.createElement("strong",null,"ID:")," ",t.id," | ",l.a.createElement("strong",null,"Rating:")," ",t.rating),l.a.createElement("li",{className:"list-group-item"},l.a.createElement("strong",null,"Import_datetime:")," ",t.import_datetime))),l.a.createElement("div",{className:"modal fade",id:"exampleModalLong",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLongTitle","aria-hidden":"true"},l.a.createElement("div",{className:"modal-dialog",role:"document"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h5",{className:"modal-title",id:"exampleModalLongTitle"},"Modal title"),l.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),l.a.createElement("div",{className:"modal-body"},"...Test"),l.a.createElement("div",{className:"modal-footer"},l.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close"))))))},b=function(e){var t=e.gifs,a=e.isInCollection,n=e.onToggleCollection;return l.a.createElement("div",{className:"card-columns"},t.map(function(e){return l.a.createElement(N,{key:e.id,gif:e,inCollection:a(e.id),toggleCollection:function(){return n(e)}})}))},y=function(e){var t=e.handlePaginationNext;return l.a.createElement("nav",{"aria-label":"Page navigation example"},l.a.createElement("ul",{className:"pagination"},l.a.createElement("li",{className:"page-item"},l.a.createElement("a",{className:"page-link",href:"#"},"Previous")),l.a.createElement("li",{className:"page-item"},l.a.createElement("a",{className:"page-link",href:"#"},"1")),l.a.createElement("li",{className:"page-item"},l.a.createElement("a",{className:"page-link",href:"#"},"2")),l.a.createElement("li",{className:"page-item"},l.a.createElement("a",{className:"page-link",href:"#"},"3")),l.a.createElement("li",{className:"page-item",onClick:t},l.a.createElement("a",{className:"page-link",href:"#"},"Next"))))},C=function(e){var t=e.onSearchChange,a=e.gifs,n=e.isInCollection,c=e.onToggleCollection,o=e.handlePaginationNext;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row justify-content-center my-3"},l.a.createElement(v,{onSearchChange:t})),l.a.createElement("div",{className:"row"},l.a.createElement(y,{handlePaginationNext:o})),l.a.createElement("div",{className:"row"},l.a.createElement(b,{gifs:a,isInCollection:n,onToggleCollection:c})))},S=function(e){var t=e.myCollection,a=e.onToggleCollection,n=e.isInCollection;return l.a.createElement("div",{className:"row"},l.a.createElement(b,{gifs:t,onToggleCollection:a,isInCollection:n}))},I=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={selectedFile:null,errorMsg:null,successMsg:null},a.fileSelectedHandler=function(e){a.setState({selectedFile:e.target.files[0]})},a.generateErrorMsg=function(e){var t=l.a.createElement("div",{className:"alert alert-danger my-0 py-2",role:"alert"},l.a.createElement("p",null,"A aparut o eroare:"),l.a.createElement("p",null,e));a.setState({errorMsg:t,successMsg:null})},a.generateSuccessMsg=function(e){var t="https://api.giphy.com/v1/gifs/".concat(e,"?api_key=JU6K8LiJFWg6ububq0idHxB0yo7IBEXI");fetch(t).then(function(e){return e.json()}).then(function(t){var n=l.a.createElement("div",{className:"alert alert-succes my-0 py-2",role:"alert"},l.a.createElement("p",null,"The image has been uploaded!"),l.a.createElement("p",null,"ID: ",e),l.a.createElement("iframe",{src:t.data.embed_url,title:t.data.title,width:"480",height:"460",frameBorder:"0",className:"giphy-embed",allowFullScreen:!0}),l.a.createElement("p",null,l.a.createElement("a",{href:t.data.url},"via GIPHY")));a.setState({errorMsg:null,successMsg:n})})},a.fileUploadHandler=function(e){e.preventDefault();var t=new FormData;t.append("file",a.state.selectedFile),fetch("https://upload.giphy.com/v1/gifs?api_key=JU6K8LiJFWg6ububq0idHxB0yo7IBEXI",{method:"POST",body:t}).then(function(e){return e.json()}).then(function(e){if(console.log(e),200!==e.meta.status){var t="Status: ".concat(e.meta.status,"; Message: ").concat(e.meta.msg);a.generateErrorMsg(t)}else a.generateSuccessMsg(e.data.id)}).catch(function(e){a.generateErrorMsg(e.message),console.dir(e)})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},this.state.errorMsg||null,this.state.successMsg||null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"foto",className:"col-form-label"},"Select an animated Gif:"),l.a.createElement("input",{type:"file",onChange:this.fileSelectedHandler,id:"foto",name:"foto"})),l.a.createElement("div",null,l.a.createElement("button",{type:"button",className:"btn btn-success",onClick:this.fileUploadHandler},"Upload"))))}}]),t}(n.Component),k=function(){return l.a.createElement("div",{className:"main-content not-found"},l.a.createElement("h2",null,"Page Not Found :( "))},x="https://api.giphy.com/v1/gifs",M="api_key=JU6K8LiJFWg6ububq0idHxB0yo7IBEXI",T=12,O=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={gifs:[],currentPage:0,myCollection:localStorage.getItem("myCollection")?JSON.parse(localStorage.getItem("myCollection")):[],endpoint:x+"/trending?"+M+"&limit="+T},a.isInCollection=function(e){return-1!==a.state.myCollection.map(function(e){return e.id}).indexOf(e)},a.handleToggleCollection=function(e){a.isInCollection(e.id)?a.setState(function(t){return{myCollection:t.myCollection.filter(function(t){return t.id!==e.id})}}):a.setState(function(t){return{myCollection:[].concat(Object(r.a)(t.myCollection),[e])}})},a.handleOnSearchChange=function(e){var t=x+"/search?"+M+"&q="+e+"&limit="+T;a.setState({endpoint:t,currentPage:0}),a.fetchGifs(t)},a.handlePaginationNext=function(){a.setState(function(e){var t=a.state.endpoint+"&offset="+(e.currentPage+1)*T;return a.fetchGifs(t),{currentPage:e.currentPage+1}})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"fetchGifs",value:function(e){var t=this;fetch(e).then(function(e){return e.json()}).then(function(e){console.dir(e),t.setState({gifs:e.data})}).catch(function(e){return console.log(e)})}},{key:"componentDidMount",value:function(){var e=this.state.endpoint+"&offset="+this.state.currentPage*T;this.fetchGifs(e)}},{key:"componentDidUpdate",value:function(e,t){t.myCollection.length!==this.state.myCollection.length&&localStorage.setItem("myCollection",JSON.stringify(this.state.myCollection))}},{key:"render",value:function(){var e=this;return l.a.createElement(g.a,{basename:"/React-Giphy-App"},l.a.createElement("div",{className:"container"},l.a.createElement(E,null),l.a.createElement(h.a,null,l.a.createElement(f.a,{exact:!0,path:"/",render:function(){return l.a.createElement(C,{onSearchChange:e.handleOnSearchChange,gifs:e.state.gifs,isInCollection:e.isInCollection,onToggleCollection:e.handleToggleCollection,handlePaginationNext:e.handlePaginationNext})}}),l.a.createElement(f.a,{path:"/mycollection",render:function(){return l.a.createElement(S,{myCollection:e.state.myCollection,onToggleCollection:e.handleToggleCollection,isInCollection:e.isInCollection})}}),l.a.createElement(f.a,{exact:!0,path:"/upload",component:I}),l.a.createElement(f.a,{component:k}))))}}]),t}(n.Component);o.a.render(l.a.createElement(O,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.977f51ab.chunk.js.map